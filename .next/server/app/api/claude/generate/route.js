"use strict";(()=>{var e={};e.id=5470,e.ids=[5470],e.modules={10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70663:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>k,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{POST:()=>c});var a=r(42706),o=r(28203),n=r(45994),i=r(39187),u=r(5370),p=r(43155);async function c(e){try{let{type:t,data:r}=await e.json(),s="",a="אתה עוזר כתיבה מקצועי בעברית. תפקידך לעזור למשתמשים לכתוב טקסטים בעברית תקנית, ברורה ומקצועית.";switch(t){case"article":s=(0,p.td)(r.title,r.keywords,r.wordCount,r.additionalInstructions),a="אתה כותב תוכן מומחה SEO עם ידע מעמיק בכללי Yoast ואופטימיזציה למנועי חיפוש. אתה כותב בעברית תקנית, טבעית וזורמת - לא תרגום מילולי מאנגלית.";break;case"email":s=(0,p.Tp)(r.context,r.recipient,r.tone);break;case"post":s=(0,p.jL)(r.topic,r.platform,r.length);break;case"story":s=(0,p.m2)(r.genre,r.characters,r.setting,r.plot,r.length,r.tone,r.additionalInstructions);break;case"summary":s=(0,p.nj)(r.text,r.length,r.focusPoints);break;case"protocol":s=(0,p.bq)(r.transcript,r.includeDecisions),a='אתה מומחה בכתיבת פרוטוקולים. חוק ברזל: כתוב את דברי הדוברים בגוף ראשון בלבד - "אני", "אנחנו", "לדעתי". לעולם אל תכתוב "הוא אמר", "היא הציעה", "הם דנו". כתוב כאילו הדובר עצמו כותב את הדברים שלו.';break;case"script":s=(0,p.EN)(r.topic,r.duration,r.audience,r.style,r.additionalInstructions),a="אתה תסריטאי מקצועי עם ניסיון רב בכתיבת תסריטים. אתה כותב בעברית מדוברת, טבעית וזורמת - לא תרגום מילולי מאנגלית. אתה פתוח ללמוד ולשפר מעריכות המשתמש ומשוב שלו.";break;case"worksheet":s=(0,p.j3)(r.instruction,r.story,r.grade,r.subject),a="אתה מורה מקצועי ומומחה בהכנת דפי עבודה וחומרי לימוד. אתה מכין דפי עבודה מקצועיים, מוכנים להדפסה, ומותאמים לרמת הכיתה. אתה כותב בעברית תקנית וקריאה - לא תרגום מילולי מאנגלית.";break;case"aiPrompt":s=(0,p.lH)(r.goal,r.context,r.outputFormat,r.additionalRequirements),a="אתה מומחה בכתיבת Prompts אפקטיביים למודלי שפה גדולים (LLMs). אתה יודע איך לכתוב prompts ברורים, מדויקים ואפקטיביים. אתה כותב בעברית תקנית כשצריך, ובאנגלית כשה-prompt מיועד למודלים באנגלית. אתה פתוח ללמוד ולשפר מעריכות המשתמש.";break;case"improve":s=`${r.instructions||"שפר את הטקסט הבא לעברית תקנית וזורמת"}${r.keywords?`

מילות מפתח לשילוב: ${r.keywords}`:""}:

${r.text}`,a="אתה כותב תוכן מומחה SEO עם ידע מעמיק בכללי Yoast ואופטימיזציה למנועי חיפוש. אתה כותב בעברית תקנית, טבעית וזורמת - לא תרגום מילולי מאנגלית. שמור על המסר המקורי אך שפר את הניסוח, הבהרה והמבנה.";break;default:return i.NextResponse.json({error:"סוג לא נתמך"},{status:400})}let o=await (0,u.Df)({prompt:s,systemPrompt:a,maxTokens:"article"===t?8192:r.maxTokens||4096,temperature:r.temperature||.7});return i.NextResponse.json({result:o})}catch(e){if(console.error("Error in Claude API:",e),e instanceof Error){if(e.message.includes("API key"))return i.NextResponse.json({error:"שגיאה בהגדרת API key"},{status:500});if(e.message.includes("rate limit"))return i.NextResponse.json({error:"חרגת ממגבלת השימוש. נסה שוב מאוחר יותר"},{status:429})}return i.NextResponse.json({error:"שגיאה ביצירת הטקסט"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/claude/generate/route",pathname:"/api/claude/generate",filename:"route",bundlePath:"app/api/claude/generate/route"},resolvedPagePath:"C:\\Users\\liat\\OneDrive - מ.י. לתמלול והקלטה בע מ\\מסמכים\\ktiva-evrit\\app\\api\\claude\\generate\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:x}=d;function k(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,5452,8508,9188],()=>r(70663));module.exports=s})();